/******************************************
 * Websanova.com
 *
 * Resources for web entrepreneurs
 *
 * @author          Websanova
 * @copyright       Copyright (c) 2012 Websanova.
 * @license         This websanova color picker jQuery plug-in is dual licensed under the MIT and GPL licenses.
 * @link            http://www.websanova.com
 * @docs            http://www.websanova.com/plugins/websanova/color-picker
 * @version         Version 1.1
 *
 ******************************************/
(function(c){var b={color:"black",opacity:0.8,initColor:"#FF0000",mode:"flat",buttonSize:20,effect:"slide",showSpeed:500,hideSpeed:500,onMouseover:null,onMouseout:null,onSelect:null};c.fn.wColorPicker=function(d){d=c.extend({},b,d||{});return this.each(function(){var e=c(this);var f=new a(d);f.generate();f.appendToElement(e);f.colorSelect(f,d.initColor)})};function a(d){this.colorPicker=null;this.settings=d;this.currentColor=d.initColor;this.height=null;this.width=null;this.slideTopToBottom=null;this.customTarget=null;this.buttonColor=null;this.paletteHolder=null;return this}a.prototype={generate:function(){if(this.colorPicker){return this.colorPicker}var j=this;var g={clear:"both",height:0,lineHeight:0,fontSize:0};this.customTarget=c('<div class="_wColorPicker_customTarget"></div>');this.customInput=c('<input type="text" class="_wColorPicker_customInput" value=""/>').keyup(function(p){var o=(p.keyCode?p.keyCode:p.which);var n=j.validHex(c(this).val());c(this).val(n);if(n.length==7){j.customTarget.css("backgroundColor",n)}if(o==13){j.colorSelect(j,c(this).val());if(j.buttonColor){j.hidePalette(j)}}}).click(function(n){n.stopPropagation()});var d=c('<div class="_wColorPicker_custom"></div>').append(this.appendColors(c('<div class="_wColorPicker_noColor">'),["transparent"],1)).append(this.customTarget).append(this.customInput).append(c("<div></div>").css(g));var e=["000000","333333","666666","999999","CCCCCC","FFFFFF","FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF"];var k=this.appendColors(c('<div class="_wColorPicker_palette_simple"></div>'),e,1);var l=["000000","003300","006600","009900","00CC00","00FF00","330000","333300","336600","339900","33CC00","33FF00","660000","663300","666600","669900","66CC00","66FF00","000033","003333","006633","009933","00CC33","00FF33","330033","333333","336633","339933","33CC33","33FF33","660033","663333","666633","669933","66CC33","66FF33","000066","003366","006666","009966","00CC66","00FF66","330066","333366","336666","339966","33CC66","33FF66","660066","663366","666666","669966","66CC66","66FF66","000099","003399","006699","009999","00CC99","00FF99","330099","333399","336699","339999","33CC99","33FF99","660099","663399","666699","669999","66CC99","66FF99","0000CC","0033CC","0066CC","0099CC","00CCCC","00FFCC","3300CC","3333CC","3366CC","3399CC","33CCCC","33FFCC","6600CC","6633CC","6666CC","6699CC","66CCCC","66FFCC","0000FF","0033FF","0066FF","0099FF","00CCFF","00FFFF","3300FF","3333FF","3366FF","3399FF","33CCFF","33FFFF","6600FF","6633FF","6666FF","6699FF","66CCFF","66FFFF","990000","993300","996600","999900","99CC00","99FF00","CC0000","CC3300","CC6600","CC9900","CCCC00","CCFF00","FF0000","FF3300","FF6600","FF9900","FFCC00","FFFF00","990033","993333","996633","999933","99CC33","99FF33","CC0033","CC3333","CC6633","CC9933","CCCC33","CCFF33","FF0033","FF3333","FF6633","FF9933","FFCC33","FFFF33","990066","993366","996666","999966","99CC66","99FF66","CC0066","CC3366","CC6666","CC9966","CCCC66","CCFF66","FF0066","FF3366","FF6666","FF9966","FFCC66","FFFF66","990099","993399","996699","999999","99CC99","99FF99","CC0099","CC3399","CC6699","CC9999","CCCC99","CCFF99","FF0099","FF3399","FF6699","FF9999","FFCC99","FFFF99","9900CC","9933CC","9966CC","9999CC","99CCCC","99FFCC","CC00CC","CC33CC","CC66CC","CC99CC","CCCCCC","CCFFCC","FF00CC","FF33CC","FF66CC","FF99CC","FFCCCC","FFFFCC","9900FF","9933FF","9966FF","9999FF","99CCFF","99FFFF","CC00FF","CC33FF","CC66FF","CC99FF","CCCCFF","CCFFFF","FF00FF","FF33FF","FF66FF","FF99FF","FFCCFF","FFFFFF",];var m=this.appendColors(c('<div class="_wColorPicker_palette_mixed"></div>'),l,18);var f=c('<div class="_wColorPicker_bg"></div>').css({opacity:this.settings.opacity});var h=c('<div class="_wColorPicker_content"></div>').append(d).append(k).append(m).append(c("<div></div>").css(g));this.colorPicker=c('<div class="_wColorPicker_holder"></div>').click(function(n){n.stopPropagation()}).append(c('<div class="_wColorPicker_outer"></div>').append(c('<div class="_wColorPicker_inner"></div>').append(f).append(h))).addClass("_wColorPicker_"+this.settings.color);return this.colorPicker},appendColors:function(h,f,e){var d=1;var g=this;for(index in f){h.append(c('<div id="_wColorPicker_color_'+d+'" class="_wColorPicker_color _wColorPicker_color_'+d+'"></div>').css("backgroundColor","#"+f[index]).click(function(){g.colorSelect(g,c(this).css("backgroundColor"))}).mouseout(function(j){g.colorHoverOff(g,c(this))}).mouseover(function(){g.colorHoverOn(g,c(this))}));if(d==e){h.append(c("<div></div>").css({clear:"both",height:0,fontSize:0,lineHeight:0,marginTop:-1}));d=0}d++}return h},colorSelect:function(e,d){d=e.toHex(d);e.customTarget.css("backgroundColor",d);e.currentColor=d;e.customInput.val(d);if(e.settings.onSelect){e.settings.onSelect(d)}if(e.buttonColor){e.buttonColor.css("backgroundColor",d);e.hidePalette(e)}},colorHoverOn:function(f,d){d.parent().children("active").removeClass("active");d.addClass("active").next().addClass("activeLeft");d.nextAll("."+d.attr("id")+":first").addClass("activeTop");var e=f.toHex(d.css("backgroundColor"));f.customTarget.css("backgroundColor",e);f.customInput.val(e);if(f.settings.onMouseover){f.settings.onMouseover(e)}},colorHoverOff:function(e,d){d.removeClass("active").next().removeClass("activeLeft");d.nextAll("."+d.attr("id")+":first").removeClass("activeTop");e.customTarget.css("backgroundColor",e.currentColor);e.customInput.val(e.currentColor);if(e.settings.onMouseout){e.settings.onMouseout(e.currentColor)}},appendToElement:function(d){var f=this;if(f.settings.mode=="flat"){d.append(f.colorPicker)}else{f.paletteHolder=c('<div class="_wColorPicker_paletteHolder"></div>').css({position:"absolute",overflow:"hidden",width:1000}).append(f.colorPicker);f.buttonColor=c('<div class="_wColorPicker_buttonColor"></div>').css({width:f.settings.buttonSize,height:f.settings.buttonSize});var e=c('<div class="_wColorPicker_buttonHolder"></div>').css({position:"relative"}).append(c('<div class="_wColorPicker_buttonBorder"></div>').append(f.buttonColor)).append(f.paletteHolder);d.append(e);f.width=f.colorPicker.outerWidth();f.height=f.colorPicker.outerHeight();f.paletteHolder.css({width:f.width,height:f.height}).hide();if(f.settings.mode=="hover"){e.hover(function(g){f.showPalette(g,f)},function(g){f.hidePalette(f)})}else{if(f.settings.mode=="click"){c(document).click(function(){if(f.paletteHolder.hasClass("active")){f.hidePalette(f)}});e.click(function(g){g.stopPropagation();f.paletteHolder.hasClass("active")?f.hidePalette(f):f.showPalette(g,f)})}}f.colorSelect(f,f.settings.initColor)}},showPalette:function(h,g){var j=g.paletteHolder.parent().offset();var f=0;var d=g.paletteHolder.parent().outerHeight();g.slideTopToBottom=d;if(j.left-c(window).scrollLeft()+g.width>c(window).width()){f=-1*(g.width-g.paletteHolder.parent().outerWidth())}if(j.top-c(window).scrollTop()+g.height>c(window).height()){g.slideTopToBottom=0;d=-1*(g.height)}g.paletteHolder.css({left:f,top:d});g.paletteHolder.addClass("active");if(g.settings.effect=="slide"){g.paletteHolder.stop(true,false).css({height:0,top:(g.slideTopToBottom==0?0:d)}).show().animate({height:g.height,top:d},g.settings.showSpeed)}else{if(g.settings.effect=="fade"){g.paletteHolder.stop(true,false).css({opacity:0}).show().animate({opacity:1},g.settings.showSpeed)}else{g.paletteHolder.show()}}},hidePalette:function(d){if(d.paletteHolder.hasClass("active")){d.paletteHolder.removeClass("active");if(d.settings.effect=="slide"){d.paletteHolder.stop(true,false).animate({height:0,top:(d.slideTopToBottom==0?0:d.slideTopToBottom)},d.settings.hideSpeed,function(){d.paletteHolder.hide()})}else{if(d.settings.effect=="fade"){d.paletteHolder.stop(true,false).animate({opacity:0},d.settings.hideSpeed,function(){d.paletteHolder.hide()})}else{d.paletteHolder.hide()}}}},toHex:function(d){if(d.substring(0,3)=="rgb"){var e=d.substring(4,d.length-1).replace(/\s/g,"").split(",");for(i in e){e[i]=parseInt(e[i]).toString(16);if(e[i]=="0"){e[i]="00"}}var f="#"+e.join("").toUpperCase()}else{f=d}return f},validHex:function(d){return"#"+d.replace(/[^0-9a-f]/ig,"").substring(0,6).toUpperCase()}}})(jQuery);